<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="prism.css" />
</head>

<body>
    <div class="container">
        <div class="code-wrapper">
            <pre>
                <code id="code" class="language-css">
                    <ul>
                        <li>A Promise is an object that returns a value which you hope to receive in future but not now</li>
                        <li>Js is always sync and single-threaded. It means JS never wait for code or function result when they take
                            some time, JS direct execute next code.</li>
                        <li>1. Producing code. -> fetch</li>
                        <li>Assuming code -> .then / .catch / .finally</li>
                    </ul>
                    <div>
                        <p>Works on condition where more than one promises are working together.</p>
                        <ul>
                            <li>1. Promise.all -> all promises fail if one fails</li>
                            <li>2. Promise.allsettled -> which promises are pass and which are fails </li>
                            <li>3. Promise.race -> give the result of promise which complete first.</li>
                        </ul>
                    </div>
                </code>
            </pre>
            <button id="copy-button">Copy</button>
          </div>
    </div>
   <!-- <div class="container">
        <div class="code-wrapper">
            <pre>
                <code id="code" class="language-css">
                  <script>
    let data = 1
    console.warn("one", data)
    data = 2
    setTimeout(() => {
        console.warn("two", data)
    }, 900)
    data = 3
    console.warn('three', data)
    console.warn("both printing 3 - problem");

    // one 1
    // three 3
    // both printing 3 - problem
    // two 3
</script>
                </code>
            </pre>
            <button id="copy-button">Copy</button>
          </div>
    </div> -->
  <div class="container">
        <div class="code-wrapper">
            <pre>
                <code id="code" class="language-css">
                    <script>
                        let data1 = new Promise((resolve, reject) => {
                            setTimeout(() => {
                                resolve({
                                    name: 'John',
                                    age: 30
                                })
                                // reject('error');
                            }, 1000)
                        })
                        data1.then((data) => {
                            console.log(data)
                        }).catch((err) => {
                            console.log(err)
                        })
                        console.warn("before fetch");

                    // before fetch
                    // {name:"John", age:30}
                    </script>
                </code>
            </pre>
            <button id="copy-button">Copy</button>
          </div>
    </div>
  <div class="container">
        <div class="code-wrapper">
            <pre>
                <h2>Console</h2>
                
                <code id="code" class="language-css">
                    <script>
                        let data2 = fetch('https://jsonplaceholder.typicode.com/todos')
                        data2.then((data) => {
                            console.log(data)
                            return data.json()
                        }).then((data) => {//promise chaining
                            console.log(data)
                        }).catch((err) => {
                            console.log(err)
                        }).finally(() => {
                            console.log("finally block")
                        }) 
                    </script>
                </code>
            </pre>
            <button id="copy-button">Copy</button>
          </div>
    </div>
</body>
<script src="main.js" defer></script>
<script src="prism.js"></script>

</html>