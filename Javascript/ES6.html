<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>ES6</h2>
    <div class="container">
        <ul>
            <li>Variable Declarations with let and const</li>
            <li>Blocks and IIFEs</li>
            <li>Strings</li>
            <li>Arrow Functions</li>
            <li>Destructuring</li>
            <li>Arrays</li>
            <li>Spread Operator</li>
            <li>Rest and Defualt Parameters</li>
            <li>Maps</li>
            <li>Classes and subclasses</li>
        </ul>
    </div>
    <h3>1. let</h3>
    <script>
        if (true) {
            let x = 10;
            document.write('<br> let x = 10');
            document.write('<br>inside the block of if: ' + x);
        }
        document.write('<br>outside the block of if /cant access/: ' + 'error');
    </script>
    <h3>2 .Const</h3>
    <p>

        const marks = [10,20,30];<br>
        marks.push(40);
    </p>
    <script>
        const marks = [10, 20, 30];
        marks.push(40);
        document.write('<br> makrs' + marks.toString());
        document.write('<br> array are refference type');
    </script>

    <h3>3. Default parameter</h3>
    <p> var displayMessage=(message='this is a message')=>{<br>
        document.write('<br>'+message);<br>
        } <br>
        displayMessage('hello'); <br>
        displayMessage();</p>
    <script>
        var displayMessage = (message = 'this is a message') => {
            document.write('<br>' + message);
        }
        displayMessage('hello');
        displayMessage();
    </script>

    <h3>4. spread operator</h3>
    <p> var names = ['jim','john','rob']; <br>
        document.write(...names,'rabin');</p>
    <script>
        var names = ['jim', 'john', 'rob'];
        document.write(...names, 'rabin');
    </script>

    <h4>5. Template String</h4>
    <p> var message = `hello rbain`; <br>
        document.write(`message : ${message}`);</p>
    <script>
        var message = `hello rbain`;
        document.write(`message : ${message}`);
    </script>

    <h3>6. String methods</h3>
    <p> var message = 'rabinphaiju15@gmail.com'; <br>
        document.write(message.repeat(3)); <br>
        document.write(message.startsWith('m')); <br>
        document.write(message.includes('gmail')); <br>
        document.write(message.endsWith('gmail.com'));</p>
    <script>
        var message = 'rabinphaiju15@gmail.com';
        document.write('<br>' + message.repeat(3));
        document.write('<br>' + message.startsWith('m'));
        document.write('<br>' + message.includes('gmail'));
        document.write('<br>' + message.endsWith('gmail.com'));
    </script>

    <h3>7. sets</h3>
    <p> var animals = new Set(); <br>
        animals.add('dog');<br>
        animals.add('cat');<br>
        animals.add('mouse');<br>
        document.write(' size : '+animals.size);<br>
        animals.add('mouse');<br>
        document.write(' size : '+animals.size);<br>
        animals.delete('mouse');<br>
        document.write(' size : '+animals.size);<br>

        var people = ['rabin','john','julia','rabin'];<br>
        var peoples = new Set(people);<br>
        document.write(' size list : '+people.length);<br>
        document.write('size set : '+peoples.size);</p>
    <script>
        var animals = new Set();
        animals.add('dog');
        animals.add('cat');
        animals.add('mouse');
        document.write('<br> size : ' + animals.size);
        animals.add('mouse');
        document.write('<br> size : ' + animals.size);
        animals.delete('mouse');
        document.write('<br> size : ' + animals.size);

        var people = ['rabin', 'john', 'julia', 'rabin'];
        var peoples = new Set(people);
        document.write('<br> size list : ' + people.length);
        document.write('<br> size set : ' + peoples.size);

    </script>

    <h3>8. Arrow Function</h3>
    <div class="click-me" style="background-color: green; width: 100px; padding: 10px; cursor: pointer;">
        Click Me
    </div>
    <script>
        const years = [1990, 1965, 1982, 1937]

        const ages = years.map(el => 2020 - el)
        const agess = years.map((el, index) => ` age elemet ${index + 1} : ${2020 - el}`)
        console.log(ages, agess)

        // 
        const box = {
            color: 'green',
            position: 1,
            clickme: function () {
                document.querySelector('.click-me').addEventListener('click', () => {
                    var str = `This is box no ${this.position} and it is ${this.color}`
                    alert(str)
                })
            }
        }
        box.clickme()
    </script>
    <h3>9. Destructuring</h3>
    <script>
        const [name, age] = ['Rabin', 29]
        console.log(name)
        console.log(age)
        //
        const obj = {
            firstName: 'Rabin',
            lastName: 'Phaiju'
        }
        const { firstName, lastName } = obj;
        console.log(firstName)
        console.log(lastName)
        //
        const calcAge = (year) => {
            const age = new Date().getFullYear() - year
            return [age, 65 - age]
        }
        const [agee, retirement] = calcAge(1994)
        console.log(agee, retirement)
    </script>
    <h3>10. Arrays</h3>
    <div class="container" style="padding: 4px; width: 100px;">
        <div class="box green" style="padding: 4px;">I'm green</div>
        <div class="box blue" style="padding: 4px;">I'm blue</div>
        <div class="box orange" style="padding: 4px;">I'morange</div>
    </div>
    <script>
        const boxes = document.querySelectorAll('.box');
        Array.from(boxes).forEach(cur => cur.style.backgroundColor = 'red');
        //
        for (const cur of Array.from(boxes)) {
            if (cur.className.includes('blue')) {
                continue
            }
            cur.textContent = ' I am changed'
        }
        //
        var agesss = [12, 17, 8, 21, 14, 11]
        console.log(agesss.findIndex(cur => cur == 8))
    </script>
    <h3>11. Spread operator</h3>
    <script>
        function addFourAges(a, b) {
            return a + b
        }

        const sum3 = addFourAges(...agesss)
        document.write(sum3)
        //
        const familyA = ['John', 'James']
        const familyB = ['Miller', 'Marry']
        const biggerFamily = [...familyA, 'Phaiju', ...familyB]
        document.write(biggerFamily)
    </script>
    <h3>12. Spread operator in function --- Rest</h3>
    <script>
        function isFullAge(limit, ...years) {
            years.forEach(cur =>
                console.log(limit - cur))
        }
        isFullAge(2020, 1990, 1890, 1192)
    </script>
    <h3>12. Maps</h3>
    <script>
        const question = new Map();
        question.set('question', 'What is your name?');
        question.set(1, 'es1')
        question.set(2, 'es2')
        question.set(3, 'es3')
        question.set(4, 'es4')
        question.set(5, 'es5')
        question.set(6, 'es6')

        console.log(question.get(1))

        if (question.has(4)) {
            question.delete(4)
            console.log(question)
        }
        //
        question.forEach((value, key) => {
            console.log(`This is ${key} and its set is ${value}`)
        })
        //
        for (let [key, value] of question.entries()) {
            console.log(`This is ${key} and its set is ${value}`)

        }
    </script>
    <h3>13. Classes</h3>
    <script>
        class Person6 {
            constructor(name, yearOfBirth, job) {
                this.nmae = name;
                this.yearOfBirth = yearOfBirth;
                this.job = job;
            }

            static greeting() {
                console.log(' Good morning')
            }
            calculateAge() {
                var age = new Date().getFullYear() - parseInt(this.yearOfBirth)
                console.log(age)
            }
            // dont need prototype for methods
            // Under the hood, js converts the calculateAge to prototype
        }
        const per1 = new Person6('rabin', '1994', 'student')
        per1.calculateAge()
        Person6.greeting()
    </script>
    <h3>14. subclasses</h3>
    <script>
        class Athlete6 extends Person6 {
            constructor(name, yearOfBirth, job, olympicGames, medals) {
                super(name, yearOfBirth, job);
                this.olympicGames = olympicGames;
                this.medals = medals
            }
            wonMedal() {
                this.medals++;
                console.log(this.medals)
            }
        }
        const john1 = new Athlete6('rabin', 1994, 'swimmer', 3, 10)
        john1.calculateAge()
        john1.wonMedal()
    </script>
    <script>
        class Town {
            constructor(name, buildYear) {
                this.name = name;
                this.buildYear = buildYear;
            }
        }

        class Park extends Town {
            constructor(name, buildYear, area, numTrees) {
                super(name, buildYear);
                this.area = area;
                this.numTrees = numTrees;
            }
            treeDesity() {
                const desity = this.numTrees / this.area;
                console.log(`${this.name} has a tree dessity of ${desity} trees per square meter.`);
            }
        }

        class Street extends Town {
            constructor(name, buildYear, length, size = 3) {
                super(name, buildYear);
                this.length = length;
                this.size = size;
            }
            classifySteet() {
                const classification = new Map();
                classification.set(1, "tiny");
                classification.set(2, "small");
                classification.set(3, "normal");
                classification.set(4, "big");
                classification.set(5, "huge");
                console.log(
                    `${this.name}, build in ${this.buildYear}, is a ${classification.get(this.size)} street`
                );
            }
        }

        const allParks = [
            new Park("Green Park", 1978, 0.2, 215),
            new Park("National park", 1894, 2.9, 3450),
            new Park("Oak Park", 1953, 0.4, 967),
        ];

        const allStreet = [
            new Street("Ocean Avenue", 1999, 1.1),
            new Street("Evergreen Steet", 2008, 2.7, 2),
            new Street("Sunset Boulevard", 1982, 2.5, 5),
        ];

        function calc(arr) {
            const sum = arr.reduce((prev, cur, index) =>
                prev + cur, 0)
            return [sum, sum / arr.length]
        }

        function reportParks(p) {
            console.log("park reports");
            // Density
            p.forEach((el) => el.treeDesity());
            // Average age
            const ages1 = p.map(el => new Date().getFullYear() - el.buildYear)
            const [totalAge, avgAge] = calc(ages1)
            console.log(`Our ${p.length} parks have an average of ${avgAge} years.`)

            // Which park has more than 1000 trees
            const i = p.map(el => el.numTrees).findIndex(el => el >= 1000)
            console.log(`${p[i].name} has more than 1000 trees`)
        }

        function reportSteet(s) {
            console.log('street report')
            // Total and average length of the town's street
            const [totalLength, avgLength] = calc(s.map(el => el.length))
            console.log(`Our ${s.length} streets have a total length of ${totalLength} km, with an average of ${avgLength}`)

            // Classify sizes
            s.forEach(el => el.classifySteet())
        }

        reportParks(allParks);
        reportSteet(allStreet);

    </script>
</body>

</html>